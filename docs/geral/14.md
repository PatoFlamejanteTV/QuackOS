LIBQ.md — Biblioteca Padrão do QuackOS

A libq é a biblioteca padrão mínima do QuackOS.

Ela fornece uma camada fina entre aplicações e as syscalls do QKern, mantendo:

nomes curtos

semântica previsível

implementação simples



---

Objetivos

substituir libc tradicional

facilitar escrita de apps e serviços

evitar dependências externas



---

Organização

Linguagem: C11

Compilação estática inicial

Headers próprios


Estrutura:

/libq
  /include
  /src


---

Wrappers de Syscalls

Cada syscall possui wrapper direto:

long q_ler(int fd, void* buf, long tam);
long q_escrever(int fd, const void* buf, long tam);
long q_abrir(const char* caminho, int flags);
long q_fechar(int fd);
long q_forquilhar(void);
long q_executar(const char* caminho, char* const argv[]);

Sem comportamento oculto.


---

Entrada e Saída

Funções utilitárias:

int q_puts(const char* s);
int q_gets(char* buf, int tam);

Implementadas sobre escrever e ler.


---

Strings

Implementações mínimas:

long q_strlen(const char* s);
int q_strcmp(const char* a, const char* b);
void q_strcpy(char* dst, const char* src);


---

Memória

Wrapper para mapeamento:

void* q_malloc(long tam);
void q_free(void* ptr);

Baseado em mapear.


---

Processo

int q_wait(int* status);
void q_exit(int codigo);


---

Regras

nenhuma função chama outra syscall escondida

comportamento explícito

erros sempre retornados



---

Testes Obrigatórios

execução de shell simples

escrita contínua

fork/exec repetido



---

Documento normativo.