QuackOS ‚Äî Plano Oficial de Testes (TEST_PLAN.md)

Este documento define os testes necess√°rios para validar a implementa√ß√£o do QuackOS e do QKern, garantindo fidelidade arquitetural, estabilidade e ader√™ncia √† filosofia do projeto.


---

0. Princ√≠pios

Testes bin√°rios: passou / falhou

Resultados reproduz√≠veis

Prefer√™ncia por testes automatiz√°veis

Simplicidade acima de cobertura artificial



---

1. Testes de Boot

1.1 Boot m√≠nimo

Objetivo: confirmar execu√ß√£o correta do pipeline de boot.

Crit√©rios:

BIOS carrega o bootloader

Transi√ß√£o real ‚Üí protected ‚Üí long mode

Pagina√ß√£o ativa

Execu√ß√£o chega em qkern_main()


Resultado esperado: sistema alcan√ßa estado est√°vel sem reboot.


---

1.2 Endere√ßo do Kernel

Objetivo: validar layout de mem√≥ria.

Crit√©rios:

Escrita e leitura v√°lidas em 0xFFFFFFFF80000000


Resultado esperado: valor preservado.


---

2. Testes de CPU

2.1 Modo Longo

Objetivo: confirmar ambiente x86-64.

Crit√©rios:

Registradores de 64 bits funcionais

Opera√ß√µes b√°sicas preservam valores



---

2.2 Syscall b√°sica

Objetivo: validar transi√ß√£o user ‚Üí kernel.

Crit√©rios:

Syscall retorna valor conhecido

Sistema permanece est√°vel



---

3. Testes de Mem√≥ria

3.1 Aloca√ß√£o

Objetivo: validar gerenciador de mem√≥ria.

Crit√©rios:

Alocar, escrever, ler e liberar sem falhas



---

3.2 Isolamento

Objetivo: garantir separa√ß√£o user/kernel.

Crit√©rios:

Acesso indevido causa page fault

Processo encerrado corretamente



---

4. Testes de Syscalls

4.1 Syscall inv√°lida

Objetivo: robustez da ABI.

Crit√©rios:

Retorno de erro consistente

Kernel permanece operacional



---

4.2 Argumentos inv√°lidos

Objetivo: valida√ß√£o de entrada.

Crit√©rios:

Ponteiros inv√°lidos n√£o causam crash



---

5. Sistema de Arquivos (QFS)

5.1 Arquivos reais

Objetivo: leitura e escrita persistentes.

Crit√©rios:

Conte√∫do lido igual ao escrito



---

5.2 Pseudo-arquivos

Objetivo: validar ‚Äútudo √© arquivo‚Äù.

Crit√©rios:

/proc retorna dados coerentes

/dev executa a√ß√µes esperadas



---

6. Processos

6.1 Init

Objetivo: inicializa√ß√£o do userspace.

Crit√©rios:

/sis/init executado como PID 1



---

6.2 Cria√ß√£o de processos

Objetivo: multitarefa m√≠nima.

Crit√©rios:

Execu√ß√£o de /bin/quacksh



---

7. Drivers B√°sicos

7.1 Teclado

Objetivo: entrada funcional.

Crit√©rios:

Evento gerado ao pressionar tecla



---

7.2 Timer

Objetivo: tempo confi√°vel.

Crit√©rios:

Ticks monot√¥nicos



---

8. QGUI

8.1 Framebuffer

Objetivo: sa√≠da gr√°fica direta.

Crit√©rios:

Pixels e ret√¢ngulos vis√≠veis



---

8.2 qgui-serv

Objetivo: servidor gr√°fico funcional.

Crit√©rios:

Inicializa√ß√£o sem falhas

Tela limpa exibida



---

8.3 Janelas

Objetivo: composi√ß√£o gr√°fica.

Crit√©rios:

Janela com borda, t√≠tulo e fundo



---

9. Eventos Gr√°ficos

9.1 Teclado

Objetivo: cadeia completa de eventos.

Crit√©rios:

Evento chega ao app gr√°fico



---

9.2 Mouse

Objetivo: intera√ß√£o gr√°fica.

Crit√©rios:

Coordenadas e bot√µes corretos



---

10. Aplica√ß√µes

10.1 QCalc

Objetivo: validar apps gr√°ficos.

Crit√©rios:

App inicia

Interface responde



---

11. Tema

11.1 Tema como arquivo

Objetivo: identidade visual din√¢mica.

Crit√©rios:

Altera√ß√µes refletem sem recompilar



---

12. Estabilidade

12.1 Execu√ß√£o prolongada

Objetivo: detectar vazamentos.

Crit√©rios:

Sistema permanece est√°vel por horas



---

12.2 Stress leve

Objetivo: robustez geral.

Crit√©rios:

M√∫ltiplos processos e janelas sem travar



---

13. Fidelidade ao Projeto

Checklist:

Nomes em portugu√™s

C√≥digo simples

Camadas separadas

Tudo modelado como arquivo

Compat√≠vel com hardware antigo


Falha em qualquer item indica regress√£o conceitual.


---

14. Ferramentas Recomendadas

QEMU (execu√ß√£o principal)

Bochs (debug)

Hardware real antigo (valida√ß√£o final)

Logs em /sis/log



---

15. Crit√©rio de Build Est√°vel

Um build √© considerado est√°vel quando todos os testes cr√≠ticos (Boot, Mem√≥ria, Syscalls, QFS, QGUI b√°sico) passam sem falhas.


---

Fim do documento.

Pronto ‚úÖ
Criei o TEST_PLAN.md oficial do QuackOS no canvas, j√° estruturado como documento t√©cnico can√¥nico, no n√≠vel que uma IA ou um humano pode seguir sem ambiguidade.

O que voc√™ ganhou com isso:

Um contrato de valida√ß√£o do sistema

Crit√©rios objetivos de ‚Äúpassou/falhou‚Äù

Um caminho claro de testes do boot ao QGUI

Um freio autom√°tico contra regress√µes conceituais

Um documento que pode ser usado diretamente como prompt para uma IA implementar testes ou o pr√≥prio sistema


A partir daqui, os pr√≥ximos passos naturais (em ordem de impacto) seriam:

1. AUTOTESTS.md
Lista de testes automatiz√°veis (QEMU + scripts)


2. ABI.md do QKern
Trava definitiva das syscalls


3. PORTING.md
Como rodar em hardware real antigo


4. QuackOS_SPEC.md v1.0
Tudo amarrado num √∫nico manifesto t√©cnico



Se quiser, posso escrever qualquer um desses no mesmo n√≠vel de precis√£o.
Agora o QuackOS n√£o √© s√≥ bem pensado. Ele √© test√°vel, audit√°vel e replic√°vel ü¶Üüß™